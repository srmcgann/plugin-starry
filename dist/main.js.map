{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./plugin.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","s","kiwi","plugin","log","starColor","state","setting","document","createElement","w","j","X","Y","Z","t","dataURL","joined","S","Math","sin","C","cos","width","height","x","getContext","paint","div","style","background","backgroundSize","Draw","globalAlpha","fillStyle","fillRect","strokeStyle","beginPath","stroke","pow","lineTo","divs","getElementsByTagName","length","className","indexOf","redrawDivs","toDataURL","requestAnimationFrame","on","command","event","buttonAdded","conferencingTool","addUi","onclick","e","preventDefault","camClick","camsVisible","emit","mediaViewerOpen","showCams"],"mappings":"aACA,IAAAA,KAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAC,QAGA,IAAAC,EAAAJ,EAAAE,IACAG,EAAAH,EACAI,GAAA,EACAH,YAUA,OANAI,EAAAL,GAAAM,KAAAJ,EAAAD,QAAAC,IAAAD,QAAAF,GAGAG,EAAAE,GAAA,EAGAF,EAAAD,QAKAF,EAAAQ,EAAAF,EAGAN,EAAAS,EAAAV,EAGAC,EAAAU,EAAA,SAAAR,EAAAS,EAAAC,GACAZ,EAAAa,EAAAX,EAAAS,IACAG,OAAAC,eAAAb,EAAAS,GACAK,cAAA,EACAC,YAAA,EACAC,IAAAN,KAMAZ,EAAAmB,EAAA,SAAAjB,GACAY,OAAAC,eAAAb,EAAA,cAAiDkB,OAAA,KAIjDpB,EAAAqB,EAAA,SAAAlB,GACA,IAAAS,EAAAT,KAAAmB,WACA,WAA2B,OAAAnB,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAH,EAAAU,EAAAE,EAAA,IAAAA,GACAA,GAIAZ,EAAAa,EAAA,SAAAU,EAAAC,GAAsD,OAAAV,OAAAW,UAAAC,eAAAnB,KAAAgB,EAAAC,IAGtDxB,EAAA2B,EAAA,GAIA3B,IAAA4B,EAAA,mBCnEAC,KAAAC,OAAA,wBAAAD,EAAAE,GACA,IAAAC,EAAAH,EAAAI,MAAAC,QAAA,gBACAzB,EAAA0B,SAAAC,cAAA,UACAC,EAAAjC,EAAAkC,EAAAX,EAAAY,EAAAC,EAAAC,EAAAC,EAAAC,QAAAC,OAAA,EAAAC,EAAAC,KAAAC,IAAAC,EAAAF,KAAAG,IACAxC,EAAAyC,MAAA,IACAzC,EAAA0C,OAAA,IACA,IAAAC,EAAA3C,EAAA4C,WAAA,MAyCA,SAAAC,EAAAC,GACAA,EAAAC,MAAAC,WAAA,OAAAd,QAAA,WACAY,EAAAC,MAAAE,eAAA,aA1CA,SAAAC,IAKA,IAJAP,EAAAQ,YAAA,GACAR,EAAAS,UAAA,OACAT,EAAAU,SAAA,IAAArD,EAAAyC,MAAAzC,EAAA0C,QACAC,EAAAW,YAAA/B,EACAK,EAAA5B,EAAAyC,MAAA,EAAAZ,EAAA,IAA0BA,IAAIc,EAAAY,UAAAZ,EAAAa,UAAA,CAE9B,IADAb,EAAAQ,YAAA,MAAAd,KAAAoB,IAAAzB,EAAA,GACArC,EAAA,EAAcA,IAAIgD,EAAAe,OAAA9B,GAAA,IAAAC,EAAA,IAAAO,EAAAlB,EAAA,KAAAvB,EAAAsC,EAAAJ,IAAAG,EAAAhC,EAAA0C,OAAA,MAAAb,IAAA,MAAAU,EAAArB,IAAAc,IAClBA,EAAA,GAAAH,IAAAD,EAAAK,EAAA,MAqCA,WACA,IAAA0B,EAAAjC,SAAAkC,qBAAA,OACA,QAAAjE,EAAA,EAAkBA,EAAAgE,EAAAE,OAAiBlE,IACnCwC,OACA,qBAAAwB,EAAAhE,GAAAmE,WAAAjB,EAAAc,EAAAhE,KAEA,IAAAgE,EAAAhE,GAAAmE,UAAAC,QAAA,wEACA,IAAAJ,EAAAhE,GAAAmE,UAAAC,QAAA,iEAAAlB,EAAAc,EAAAhE,IA1CAqE,GACA/B,GAAA,KACAC,QAAAlC,EAAAiE,YACAC,sBAAAhB,GAEAA,GAEA9B,EAAA+C,GAAA,mBAAAC,EAAAC,GACA,YAAAD,IAAAjC,OAAA,CACAA,QAAA,EACAmC,aAAA,EACA,MAAAC,EAAA7C,SAAAC,cAAA,KACA4C,EAAAT,UAAA,aACA1C,EAAAoD,MAAA,QAAAD,GACAA,EAAAE,QAAA,SAAAC,GACAA,EAAAC,iBACAC,UAAA,EACAC,YACAzD,EAAA0D,KAAA,oBAEAC,gBACAC,WAEA5D,EAAA0D,KAAA","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","kiwi.plugin('starryPlugin', function(kiwi, log) {\n  let starColor = kiwi.state.setting('starry.color');\n  let c = document.createElement(\"canvas\");\n  let w = i = j = p = X = Y = Z = t = dataURL = joined = 0, S = Math.sin, C = Math.cos;\n  c.width = 350;\n  c.height = 310;\n  let x = c.getContext(\"2d\");\n  function Draw(){\n    x.globalAlpha = .3;\n    x.fillStyle = \"#000\"\n    x.fillRect(0,0,c.width,c.height);\n    x.strokeStyle = starColor;\n    for(w=c.width/2,j=500;j--;x.beginPath(x.stroke())){\n      x.globalAlpha = .2 - Math.pow(Z,6) * .2;\n      for(i=6;i--;x.lineTo(w+(100-j%200+S(p=2.51*i+t+j))/Z,c.height/2+(99-j*j*6%199+C(p))/Z));\n      Z=1-(j*j/w+t/9)%1\n    }\n    redrawDivs();\n    t += 1/60;\n    dataURL = c.toDataURL();\n    requestAnimationFrame(Draw);\n  }\n  Draw();\n\n  kiwi.on('irc.raw', function(command, event){\n    if(command === \"JOIN\" && !joined){\n      joined = true;\n      buttonAdded = true;\n      const conferencingTool = document.createElement('i');\n      conferencingTool.className = 'fa fa-star';\n      kiwi.addUi('input', conferencingTool);\n      conferencingTool.onclick = function(e){\n        e.preventDefault();\n        camClick = true;\n        if(camsVisible){\n          kiwi.emit('mediaviewer.hide');\n        }else{\n          if(mediaViewerOpen){\n            showCams();\n          }else{\n            kiwi.emit('mediaviewer.show', '');\n          }\n        }\n      }\n    }\n  });\n\n  function paint(div){\n    div.style.background = 'url('+dataURL+') 0% 50%';\n    div.style.backgroundSize = '100% 100%';\n  }\n  \n  function redrawDivs(){\n    let divs=document.getElementsByTagName(\"div\");\n    for(let i = 0; i < divs.length; i++){\n      if(joined){\n        if(divs[i].className === \"kiwi-messagelist\") paint(divs[i]);\n      }else{\n        if(divs[i].className.indexOf(\"kiwi-startup-common-section kiwi-startup-common-section-connection\") !== -1 ||\n           divs[i].className.indexOf(\"kiwi-startup-common-section kiwi-startup-common-section-info\") !== -1) paint(divs[i]);\n      }\n    }\n  }\n});"],"sourceRoot":""}